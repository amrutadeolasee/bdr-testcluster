# {{ansible_managed}}
#
# Configuration snippet generated by Ansible by the bdr_07x_node role


{% set conns = [] %}
{% for x in groups[bdrgroupname] %}
{%   if x != inventory_hostname %}
{%     set ignored = conns.append(x) %}
{%   endif %}
{% endfor %}

bdr.connections = '{{ conns | join(',') }}'

{% for nodename in groups[bdrgroupname] %}
{%   if nodename != inventory_hostname %}
bdr.{{nodename}}_dsn = 'port={{hostvars[nodename]['postgres_port']}} user={{hostvars[nodename]['postgres_superuser']}} dbname={{hostvars[nodename]['bdr_node_database']}}'
{%   endif %}
{% endfor %}
